<!-- ä¸ªäººä¸­å¿ƒé¡µ -->
<view class="container">
  <!-- é¡¶éƒ¨èƒŒæ™¯ -->
  <view class="header-bg">
    <view class="gradient-bg"></view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatar}}" mode="aspectFill" wx:if="{{userInfo.avatar}}"/>
      <view class="avatar avatar-placeholder" wx:else>
        <text class="avatar-icon">ğŸ‘¤</text>
      </view>
      <view class="user-detail">
        <text class="nickname">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
        <view class="user-role">
          <text class="role-tag {{userInfo.role}}">{{roleText}}</text>
          <text wx:if="{{userInfo.created_at}}" class="join-time">{{joinTime}}</text>
        </view>
      </view>
      <view class="edit-btn" bindtap="editProfile">
        <text class="icon">âœï¸</text>
      </view>
    </view>

    <!-- å­¦ä¹ ç»Ÿè®¡ -->
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{stats.totalTasks || 0}}</text>
        <text class="stat-label">æ€»ä»»åŠ¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.completedTasks || 0}}</text>
        <text class="stat-label">å·²å®Œæˆ</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.excellentCount || 0}}</text>
        <text class="stat-label">æä½³ä½œå“</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.completionRate || '0%'}}</text>
        <text class="stat-label">å®Œæˆç‡</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-title">å­¦ä¹ è®°å½•</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="goToMySubmissions">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“</text>
          <text class="menu-name">æˆ‘çš„ä½œä¸š</text>
        </view>
        <view class="menu-right">
          <text class="menu-value">{{stats.totalSubmissions || 0}}</text>
          <text class="arrow">â€º</text>
        </view>
      </view>
      
      <view class="menu-item" bindtap="goToAchievements">
        <view class="menu-left">
          <text class="menu-icon">ğŸ†</text>
          <text class="menu-name">æˆå°±å¢™</text>
        </view>
        <view class="menu-right">
          <text class="menu-value">{{stats.achievements || 0}}</text>
          <text class="arrow">â€º</text>
        </view>
      </view>

      <view class="menu-item" bindtap="goToLearningReport">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“Š</text>
          <text class="menu-name">å­¦ä¹ æŠ¥å‘Š</text>
        </view>
        <view class="menu-right">
          <text class="menu-desc">æŸ¥çœ‹è¯¦æƒ…</text>
          <text class="arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ•™å¸ˆä¸“å±åŠŸèƒ½ -->
  <view wx:if="{{isTeacher}}" class="menu-section">
    <view class="menu-title">æ•™ç ”ç®¡ç†</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="goToTaskManage">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“‹</text>
          <text class="menu-name">ä»»åŠ¡ç®¡ç†</text>
        </view>
        <view class="menu-right">
          <text class="arrow">â€º</text>
        </view>
      </view>
      
      <view class="menu-item" bindtap="goToStudentManage">
        <view class="menu-left">
          <text class="menu-icon">ğŸ‘¥</text>
          <text class="menu-name">å­¦ç”Ÿç®¡ç†</text>
        </view>
        <view class="menu-right">
          <text class="menu-value">{{stats.studentCount || 0}}</text>
          <text class="arrow">â€º</text>
        </view>
      </view>

      <view class="menu-item" bindtap="goToGradingCenter">
        <view class="menu-left">
          <text class="menu-icon">âœï¸</text>
          <text class="menu-name">æ‰¹æ”¹ä¸­å¿ƒ</text>
        </view>
        <view class="menu-right">
          <text wx:if="{{stats.pendingGrading > 0}}" class="badge">{{stats.pendingGrading}}</text>
          <text class="arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®èœå• -->
  <view class="menu-section">
    <view class="menu-title">è®¾ç½®</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="goToNotificationSettings">
        <view class="menu-left">
          <text class="menu-icon">ğŸ””</text>
          <text class="menu-name">é€šçŸ¥è®¾ç½®</text>
        </view>
        <view class="menu-right">
          <text class="menu-desc">{{notificationStatus}}</text>
          <text class="arrow">â€º</text>
        </view>
      </view>

      <view class="menu-item" bindtap="goToHelp">
        <view class="menu-left">
          <text class="menu-icon">â“</text>
          <text class="menu-name">å¸®åŠ©ä¸­å¿ƒ</text>
        </view>
        <view class="menu-right">
          <text class="arrow">â€º</text>
        </view>
      </view>

      <view class="menu-item" bindtap="goToFeedback">
        <view class="menu-left">
          <text class="menu-icon">ğŸ’¬</text>
          <text class="menu-name">æ„è§åé¦ˆ</text>
        </view>
        <view class="menu-right">
          <text class="arrow">â€º</text>
        </view>
      </view>

      <view class="menu-item" bindtap="goToAbout">
        <view class="menu-left">
          <text class="menu-icon">â„¹ï¸</text>
          <text class="menu-name">å…³äºæˆ‘ä»¬</text>
        </view>
        <view class="menu-right">
          <text class="menu-desc">v1.0.0</text>
          <text class="arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- åº•éƒ¨ç‰ˆæƒä¿¡æ¯ -->
  <view class="footer">
    <text>Â© 2024 å…¬è€ƒç£å­¦åŠ©æ‰‹</text>
    <text>è®©å­¦ä¹ æ›´é«˜æ•ˆ</text>
  </view>
</view>

<!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
<view class="safe-bottom"></view>