<!-- ä¸ªäººä¸­å¿ƒé¡µ -->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <skeleton show="{{loading}}" type="profile" />
  
  <!-- ç”¨æˆ·ä¿¡æ¯å±•ç¤ºåŒº -->
  <view class="user-profile-section" wx:if="{{!loading}}">
    <!-- ç”¨æˆ·å¤´åƒå’Œæ˜µç§° -->
    <view class="user-main-info">
      <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill" wx:if="{{userInfo.avatar}}" lazy-load="true" binderror="onImageError"/>
      <view class="avatar-placeholder" wx:else>
        <text class="avatar-icon">ğŸ‘¤</text>
      </view>
      
      <!-- æ˜µç§°å’Œç¼–è¾‘æŒ‰é’® -->
      <view class="nickname-section">
        <text class="user-nickname">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
        <button class="edit-nickname-btn" bindtap="editNickname">
          <text class="edit-icon">âœï¸</text>
        </button>
      </view>
    </view>

  </view>
  
  <!-- å†…å®¹åˆ—è¡¨åŒº -->
  <view class="content-list">
    <!-- æˆ‘çš„ä½œä¸šç»Ÿè®¡ -->
    <view class="list-item" bindtap="goToMySubmissions">
      <view class="item-content">
        <text class="item-title">æˆ‘çš„ä½œä¸šç»Ÿè®¡</text>
        <text class="item-desc">ç´¯è®¡æäº¤ {{stats.totalSubmissions || 0}} æ¬¡</text>
      </view>
      <text class="item-arrow">â€º</text>
    </view>
    
    <!-- æƒé™çŠ¶æ€å’Œæœ‰æ•ˆæœŸ -->
    <view class="list-item">
      <view class="item-content">
        <text class="item-title">æƒé™çŠ¶æ€</text>
        <text class="item-desc">{{permissionStatus}}</text>
      </view>
    </view>
    
    <!-- è®¾ç½®é€‰é¡¹ï¼ˆé¢„ç•™ï¼‰ -->
    <view class="list-item" bindtap="goToSettings">
      <view class="item-content">
        <text class="item-title">è®¾ç½®</text>
        <text class="item-desc">é€šçŸ¥ã€éšç§ç­‰</text>
      </view>
      <text class="item-arrow">â€º</text>
    </view>
    
    <!-- å…³äºæˆ‘ä»¬ï¼ˆé¢„ç•™ï¼‰ -->
    <view class="list-item" bindtap="goToAbout">
      <view class="item-content">
        <text class="item-title">å…³äºæˆ‘ä»¬</text>
        <text class="item-desc">v1.0</text>
      </view>
      <text class="item-arrow">â€º</text>
    </view>
  </view>
  
  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>

</view>

<!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
<view class="safe-bottom"></view>