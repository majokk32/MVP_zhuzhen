<!-- 个人中心页 -->
<view class="container">
  <!-- 加载状态 -->
  <skeleton show="{{loading}}" type="profile" />
  
  <!-- 用户信息展示区 -->
  <view class="user-profile-section" wx:if="{{!loading}}">
    <!-- 用户头像和昵称 -->
    <view class="user-main-info">
      <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill" wx:if="{{userInfo.avatar}}" lazy-load="true" binderror="onImageError"/>
      <view class="avatar-placeholder" wx:else>
        <text class="avatar-icon">👤</text>
      </view>
      
      <!-- 昵称和编辑按钮 -->
      <view class="nickname-section">
        <text class="user-nickname">{{userInfo.nickname || '用户'}}</text>
        <button class="edit-nickname-btn" bindtap="editNickname">
          <text class="edit-icon">✏️</text>
        </button>
      </view>
    </view>

  </view>
  
  <!-- 内容列表区 -->
  <view class="content-list">
    <!-- 我的作业统计 -->
    <view class="list-item" bindtap="goToMySubmissions">
      <view class="item-content">
        <text class="item-title">我的作业统计</text>
        <text class="item-desc">累计提交 {{stats.totalSubmissions || 0}} 次</text>
      </view>
      <text class="item-arrow">›</text>
    </view>
    
    <!-- 权限状态和有效期 -->
    <view class="list-item">
      <view class="item-content">
        <text class="item-title">权限状态</text>
        <text class="item-desc">{{permissionStatus}}</text>
      </view>
    </view>
    
    <!-- 设置选项（预留） -->
    <view class="list-item" bindtap="goToSettings">
      <view class="item-content">
        <text class="item-title">设置</text>
        <text class="item-desc">通知、隐私等</text>
      </view>
      <text class="item-arrow">›</text>
    </view>
    
    <!-- 关于我们（预留） -->
    <view class="list-item" bindtap="goToAbout">
      <view class="item-content">
        <text class="item-title">关于我们</text>
        <text class="item-desc">v1.0</text>
      </view>
      <text class="item-arrow">›</text>
    </view>
  </view>
  
  <!-- 退出登录 -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">退出登录</button>
  </view>

</view>

<!-- 底部安全区域 -->
<view class="safe-bottom"></view>