<!--components/task-card/task-card.wxml-->
<view 
  class="task-card {{task.isExtra ? 'task-card-extra' : ''}}" 
  style="background-color: {{task.cardColor}}; animation: {{animation}}"
  bindtap="onTapCard"
  bindlongpress="onLongPressCard"
>
  <!-- ç½®é¡¶æ ‡è®°ï¼ˆè¯¾ååŠ é¤ï¼‰ -->
  <view wx:if="{{task.isExtra}}" class="pin-badge">
    <text class="pin-icon">ğŸ“Œ</text>
    <text class="pin-text">ç½®é¡¶</text>
  </view>

  <!-- è¯•ç”¨ç”¨æˆ·æƒé™æç¤º -->
  <view wx:if="{{showPermissionBadge}}" class="permission-badge trial">
    <text class="permission-icon">ğŸ”’</text>
    <text class="permission-text">è¯•ç”¨æ— æƒé™</text>
  </view>

  <!-- å¡ç‰‡ä¸»ä½“ï¼šå››è¦ç´ å±•ç¤º -->
  <view class="card-body">
    <!-- ä¸Šéƒ¨åˆ†ï¼šæ ‡é¢˜å’Œè¯„ä»· -->
    <view class="card-top">
      <!-- å·¦ä¸Šè§’ï¼šæ ‡é¢˜ -->
      <view class="card-title">
        <text class="title-text">{{task.title}}</text>
      </view>
      
      <!-- å³ä¸Šè§’ï¼šè¯„ä»·çŠ¶æ€ -->
      <view class="card-evaluation">
        <view class="status-badge status-{{task.topRightType || 'default'}}">
          {{rightStatus}}
        </view>
      </view>
    </view>

    <!-- ä¸‹éƒ¨åˆ†ï¼šçŠ¶æ€å’Œæ—¥æœŸ -->
    <view class="card-bottom">
      <!-- å·¦ä¸‹è§’ï¼šä»»åŠ¡çŠ¶æ€ -->
      <view class="task-status">
        <view class="status-label status-{{cardStyle}}">
          {{leftStatus}}
        </view>
      </view>
      
      <!-- å³ä¸‹è§’ï¼šä»»åŠ¡æˆªæ­¢æ—¶é—´ -->
      <view class="card-date">
        <text class="date-text">{{formattedTime}}</text>
      </view>
    </view>
  </view>

  <!-- æäº¤çŠ¶æ€æŒ‡ç¤ºå™¨ -->
  <view class="submit-indicator">
    <!-- æœªæäº¤ -->
    <view wx:if="{{task.submission_status === 'æœªæäº¤'}}" class="indicator-dot indicator-empty"></view>
    <!-- å¾…æ‰¹æ”¹ -->
    <view wx:elif="{{task.submission_status === 'submitted'}}" class="indicator-dot indicator-pending"></view>
    <!-- å·²æ‰¹æ”¹ -->
    <view wx:elif="{{task.submission_grade}}" class="indicator-dot indicator-done"></view>
  </view>
</view>