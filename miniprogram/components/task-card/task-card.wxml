<!--components/task-card/task-card.wxml-->
<view 
  class="task-card {{task.isExtra ? 'task-card-extra' : ''}}" 
  style="background-color: {{task.cardColor}}; animation: {{animation}}"
  bindtap="onTapCard"
  bindlongpress="onLongPressCard"
>
  <!-- ç½®é¡¶æ ‡è®°ï¼ˆè¯¾ååŠ é¤ï¼‰ -->
  <view wx:if="{{task.isExtra}}" class="pin-badge">
    <text class="pin-icon">ğŸ“Œ</text>
    <text class="pin-text">ç½®é¡¶</text>
  </view>

  <!-- å¡ç‰‡ä¸»ä½“ -->
  <view class="card-body">
    <!-- ä¸Šéƒ¨åˆ† -->
    <view class="card-top">
      <!-- å·¦ä¸Šè§’ï¼šæ ‡é¢˜ -->
      <view class="card-title">
        <text class="title-text">{{task.title}}</text>
        <text class="course-text">{{task.course}}</text>
      </view>
      
      <!-- å³ä¸Šè§’ï¼šè¯„ä»·/çŠ¶æ€ -->
      <view class="card-status">
        <view class="status-badge status-{{task.topRightType}}">
          {{task.topRightText}}
        </view>
        <!-- å¦‚æœæœ‰åˆ†æ•°ï¼Œæ˜¾ç¤ºåˆ†æ•° -->
        <view wx:if="{{task.submission_score !== null && task.submission_score !== undefined}}" class="score-text">
          {{task.submission_score}}/{{task.total_score}}åˆ†
        </view>
      </view>
    </view>

    <!-- ä¸­é—´ï¼šé¢˜ç›®æè¿°ï¼ˆæˆªå–ï¼‰ -->
    <view class="card-middle">
      <text class="desc-text">{{task.desc}}</text>
    </view>

    <!-- ä¸‹éƒ¨åˆ† -->
    <view class="card-bottom">
      <!-- å·¦ä¸‹è§’ï¼šçŠ¶æ€æ ‡ç­¾ -->
      <view class="status-label">
        <view class="label label-{{task.statusType}}">
          {{task.statusLabel}}
        </view>
        <!-- ä»»åŠ¡ç±»å‹æ ‡ç­¾ -->
        <view wx:if="{{task.task_type === 'live'}}" class="label label-live">
          <text class="label-icon">ğŸ¥</text>
          <text>ç›´æ’­è¯¾</text>
        </view>
        <view wx:elif="{{task.task_type === 'extra'}}" class="label label-extra">
          <text class="label-icon">ğŸ“š</text>
          <text>è¯¾ååŠ é¤</text>
        </view>
      </view>
      
      <!-- å³ä¸‹è§’ï¼šæ—¥æœŸ -->
      <view class="card-date">
        <text class="date-icon">ğŸ“…</text>
        <text class="date-text">{{task.deadlineText || task.created_at}}</text>
      </view>
    </view>
  </view>

  <!-- æäº¤çŠ¶æ€æŒ‡ç¤ºå™¨ -->
  <view class="submit-indicator">
    <!-- æœªæäº¤ -->
    <view wx:if="{{task.submission_status === 'æœªæäº¤'}}" class="indicator-dot indicator-empty"></view>
    <!-- å¾…æ‰¹æ”¹ -->
    <view wx:elif="{{task.submission_status === 'submitted'}}" class="indicator-dot indicator-pending"></view>
    <!-- å·²æ‰¹æ”¹ -->
    <view wx:elif="{{task.submission_grade}}" class="indicator-dot indicator-done"></view>
  </view>
</view>