<!--components/task-card/task-card.wxml-->
<view 
  class="task-card {{task.isExtra ? 'task-card-extra' : ''}}" 
  style="background-color: {{task.cardColor}}; animation: {{animation}}"
  bindtap="onTapCard"
  bindlongpress="onLongPressCard"
>
  <!-- 置顶标记（课后加餐） -->
  <view wx:if="{{task.isExtra}}" class="pin-badge">
    <text class="pin-icon">📌</text>
    <text class="pin-text">置顶</text>
  </view>

  <!-- 试用用户权限提示 -->
  <view wx:if="{{showPermissionBadge}}" class="permission-badge trial">
    <text class="permission-icon">🔒</text>
    <text class="permission-text">试用无权限</text>
  </view>

  <!-- 卡片主体：四要素展示 -->
  <view class="card-body">
    <!-- 上部分：标题和评价 -->
    <view class="card-top">
      <!-- 左上角：标题 -->
      <view class="card-title">
        <text class="title-text">{{task.title}}</text>
      </view>
      
      <!-- 右上角：评价状态 -->
      <view class="card-evaluation">
        <view class="status-badge status-{{task.topRightType || 'default'}}">
          {{rightStatus}}
        </view>
      </view>
    </view>

    <!-- 下部分：状态和日期 -->
    <view class="card-bottom">
      <!-- 左下角：任务状态 -->
      <view class="task-status">
        <view class="status-label status-{{cardStyle}}">
          {{leftStatus}}
        </view>
      </view>
      
      <!-- 右下角：任务截止时间 -->
      <view class="card-date">
        <text class="date-text">{{formattedTime}}</text>
      </view>
    </view>
  </view>

  <!-- 提交状态指示器 -->
  <view class="submit-indicator">
    <!-- 未提交 -->
    <view wx:if="{{task.submission_status === '未提交'}}" class="indicator-dot indicator-empty"></view>
    <!-- 待批改 -->
    <view wx:elif="{{task.submission_status === 'submitted'}}" class="indicator-dot indicator-pending"></view>
    <!-- 已批改 -->
    <view wx:elif="{{task.submission_grade}}" class="indicator-dot indicator-done"></view>
  </view>
</view>