<!-- GitHubé£æ ¼14å¤©æ‰“å¡å›¾ç»„ä»¶ V1.0å¢å¼ºç‰ˆ -->
<view class="checkin-chart">
  <!-- V1.0 æ–°å¢ï¼šæ™ºèƒ½åˆ†æå¤´éƒ¨ -->
  <view class="analysis-header" wx:if="{{streakInfo.current > 0 || motivationalMsg}}">
    <view class="streak-badge" wx:if="{{streakInfo.current > 0}}">
      <text class="streak-number">ğŸ”¥ {{streakInfo.current}}</text>
      <text class="streak-label">å¤©è¿ç»­</text>
    </view>
    <view class="motivational-msg" wx:if="{{motivationalMsg}}">
      <text class="msg-text">{{motivationalMsg}}</text>
    </view>
  </view>
  
  <!-- å‘¨æ ‡ç­¾è¡Œ -->
  <view class="week-labels">
    <view class="week-label">å‘¨ä¸€</view>
    <view class="week-label">å‘¨äºŒ</view>
    <view class="week-label">å‘¨ä¸‰</view>
    <view class="week-label">å‘¨å››</view>
    <view class="week-label">å‘¨äº”</view>
    <view class="week-label">å‘¨å…­</view>
    <view class="week-label">å‘¨æ—¥</view>
  </view>
  
  <!-- æ‰“å¡æ–¹æ ¼å›¾ (2è¡ŒÃ—7å¤©) -->
  <view class="checkin-grid">
    <!-- ç¬¬1è¡Œï¼šä¸Šå‘¨ (Week 2) -->
    <view class="grid-row">
      <view class="grid-day {{getWeekDayStatus(item)}} {{selectedDay === item.date ? 'selected' : ''}}" 
            wx:for="{{weekData[1]}}" 
            wx:key="date"
            data-date="{{item.date}}"
            data-checked="{{item.checked}}"
            data-weekday="{{item.weekday}}"
            bindtap="onDayTap">
        <!-- æ–°å¢ï¼šä»Šå¤©æ ‡è®° -->
        <view class="today-indicator" wx:if="{{item.is_today}}"></view>
      </view>
    </view>
    
    <!-- ç¬¬2è¡Œï¼šæœ¬å‘¨ (Week 1) -->
    <view class="grid-row">
      <view class="grid-day {{getWeekDayStatus(item)}} {{selectedDay === item.date ? 'selected' : ''}}" 
            wx:for="{{weekData[0]}}" 
            wx:key="date"
            data-date="{{item.date}}"
            data-checked="{{item.checked}}"
            data-weekday="{{item.weekday}}"
            bindtap="onDayTap">
        <!-- æ–°å¢ï¼šä»Šå¤©æ ‡è®° -->
        <view class="today-indicator" wx:if="{{item.is_today}}"></view>
      </view>
    </view>
  </view>
  
  <!-- V1.0 å¢å¼ºï¼šè¶‹åŠ¿åˆ†æåŒºåŸŸ -->
  <view class="trend-analysis" wx:if="{{trendAnalysis.trend && trendAnalysis.weekComparison}}">
    <view class="trend-item">
      <text class="trend-icon">
        {{trendAnalysis.trend === 'rising' ? 'ğŸ“ˆ' : trendAnalysis.trend === 'declining' ? 'ğŸ“‰' : 'ğŸ“Š'}}
      </text>
      <text class="trend-text">{{trendAnalysis.weekComparison}}</text>
    </view>
    <button class="detail-btn" bindtap="showDetailAnalysis" size="mini">è¯¦ç»†åˆ†æ</button>
  </view>
  
  <!-- å›¾ä¾‹è¯´æ˜ -->
  <view class="legend">
    <text class="legend-text">å°‘</text>
    <view class="legend-item level-0"></view>
    <view class="legend-item level-1"></view>
    <view class="legend-item level-2"></view>
    <view class="legend-item level-3"></view>
    <text class="legend-text">å¤š</text>
  </view>
</view>