<!-- components/data-dashboard/data-dashboard.wxml -->
<view class="data-dashboard {{dashboardType}}">
  
  <!-- çœ‹æ¿å¤´éƒ¨ -->
  <view class="dashboard-header">
    <view class="header-info">
      <text class="dashboard-title">{{dashboardConfig.title}}</text>
      <view class="real-time-indicator">
        <view class="status-dot"></view>
        <text class="status-text">å®æ—¶æ›´æ–°</text>
      </view>
    </view>
    
    <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
    <picker 
      class="time-range-picker"
      mode="selector"
      range="{{timeRangeOptions}}"
      range-key="label"
      value="{{timeRange}}"
      bindchange="onTimeRangeChange"
    >
      <view class="picker-display">
        <text class="picker-text">{{timeRangeOptions[timeRange].label}}</text>
        <text class="picker-arrow">â–¼</text>
      </view>
    </picker>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="header-actions">
      <button class="refresh-btn" bindtap="refreshDashboard" size="mini">
        ğŸ”„ åˆ·æ–°
      </button>
      <button class="export-btn" bindtap="exportDashboard" size="mini">
        ğŸ“¤ å¯¼å‡º
      </button>
    </view>
  </view>
  
  <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ -->
  <view class="stats-section">
    <view class="stats-grid">
      <view 
        class="stats-card {{loading ? 'loading' : ''}}"
        wx:for="{{statsCards}}" 
        wx:key="key"
        data-card="{{item}}"
        bindtap="onStatsCardClick"
      >
        <!-- å¡ç‰‡å›¾æ ‡ -->
        <view class="card-icon" style="background-color: {{item.color}}20; color: {{item.color}}">
          {{item.icon}}
        </view>
        
        <!-- å¡ç‰‡å†…å®¹ -->
        <view class="card-content">
          <view class="card-value">{{item.value}}</view>
          <text class="card-label">{{item.label}}</text>
          
          <!-- å˜åŒ–è¶‹åŠ¿ -->
          <view class="card-trend" wx:if="{{showTrends && item.changeDirection !== 'stable'}}">
            <text 
              class="trend-indicator {{item.changeDirection}}"
              style="color: {{getThemeColor(item.changeDirection)}}"
            >
              {{item.changeDirection === 'up' ? 'â†—' : 'â†˜'}}
            </text>
            <text class="trend-rate">{{item.changeRate}}%</text>
          </view>
        </view>
        
        <!-- è¿·ä½ è¶‹åŠ¿å›¾ -->
        <view class="mini-chart" wx:if="{{item.trend && item.trend.length > 0}}">
          <view class="chart-line"></view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å›¾è¡¨åŒºåŸŸ -->
  <view class="charts-section" wx:if="{{showCharts}}">
    
    <!-- æäº¤è¶‹åŠ¿å›¾ -->
    <view class="chart-container" wx:if="{{chartData.submissions.length > 0}}">
      <view class="chart-header">
        <text class="chart-title">æäº¤è¶‹åŠ¿</text>
        <text class="chart-subtitle">{{timeRangeOptions[timeRange].label}}æ•°æ®</text>
      </view>
      <view class="chart-content">
        <view class="chart-placeholder">
          ğŸ“Š æäº¤è¶‹åŠ¿å›¾è¡¨åŒºåŸŸ
        </view>
      </view>
    </view>
    
    <!-- ç”¨æˆ·æ´»è·ƒåº¦å›¾ -->
    <view class="chart-container" wx:if="{{chartData.users.length > 0}}">
      <view class="chart-header">
        <text class="chart-title">ç”¨æˆ·æ´»è·ƒåº¦</text>
        <text class="chart-subtitle">åœ¨çº¿ç”¨æˆ·: {{realTimeStats.onlineUsers}}</text>
      </view>
      <view class="chart-content">
        <view class="chart-placeholder">
          ğŸ“ˆ ç”¨æˆ·æ´»è·ƒåº¦å›¾è¡¨åŒºåŸŸ
        </view>
      </view>
    </view>
    
    <!-- ç³»ç»Ÿæ€§èƒ½å›¾ -->
    <view class="chart-container" wx:if="{{chartData.performance.length > 0}}">
      <view class="chart-header">
        <text class="chart-title">ç³»ç»Ÿæ€§èƒ½</text>
        <text class="chart-subtitle">å¥åº·åº¦: {{realTimeStats.systemHealth}}%</text>
      </view>
      <view class="chart-content">
        <view class="chart-placeholder">
          ğŸ’š ç³»ç»Ÿæ€§èƒ½å›¾è¡¨åŒºåŸŸ
        </view>
      </view>
    </view>
    
  </view>
  
  <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
  <view class="actions-section">
    <view class="section-title">å¿«æ·æ“ä½œ</view>
    <view class="actions-grid">
      <view 
        class="action-item"
        wx:for="{{quickActions}}" 
        wx:key="key"
        data-action="{{item}}"
        bindtap="onQuickActionClick"
      >
        <view class="action-icon">{{item.icon}}</view>
        <text class="action-label">{{item.label}}</text>
      </view>
    </view>
  </view>
  
  <!-- å®æ—¶çŠ¶æ€æ  -->
  <view class="status-bar">
    <view class="status-item">
      <text class="status-label">åœ¨çº¿ç”¨æˆ·</text>
      <text class="status-value">{{realTimeStats.onlineUsers}}</text>
    </view>
    <view class="status-item">
      <text class="status-label">å½“å‰æäº¤</text>
      <text class="status-value">{{realTimeStats.currentSubmissions}}</text>
    </view>
    <view class="status-item">
      <text class="status-label">ç³»ç»ŸçŠ¶æ€</text>
      <view class="health-indicator">
        <view 
          class="health-bar" 
          style="width: {{realTimeStats.systemHealth}}%; background-color: {{realTimeStats.systemHealth > 80 ? '#52c41a' : realTimeStats.systemHealth > 60 ? '#faad14' : '#f56565'}}"
        ></view>
        <text class="health-text">{{realTimeStats.systemHealth}}%</text>
      </view>
    </view>
  </view>
  
  <!-- åŠ è½½é®ç½© -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
</view>