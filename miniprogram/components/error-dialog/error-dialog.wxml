<!-- components/error-dialog/error-dialog.wxml -->
<view class="error-dialog-mask {{show ? 'show' : ''}}" bindtap="onClose">
  <view class="error-dialog-container" bindtap="preventTap">
    
    <!-- é”™è¯¯å›¾æ ‡å’Œæ ‡é¢˜ -->
    <view class="error-header">
      <view 
        class="error-icon" 
        style="color: {{getCurrentErrorConfig().iconColor}}"
      >
        {{getCurrentErrorConfig().icon}}
      </view>
      <view class="error-title">{{getCurrentErrorConfig().title}}</view>
    </view>
    
    <!-- é”™è¯¯ä¿¡æ¯ -->
    <view class="error-content">
      <view class="error-message">{{getCurrentErrorConfig().message}}</view>
      
      <!-- é”™è¯¯ä»£ç  -->
      <view wx:if="{{errorCode}}" class="error-code">
        é”™è¯¯ä»£ç : {{errorCode}}
      </view>
    </view>
    
    <!-- è§£å†³å»ºè®® -->
    <view class="suggestions-section" wx:if="{{getCurrentErrorConfig().suggestions.length > 0}}">
      <view class="suggestions-title">ğŸ’¡ è§£å†³å»ºè®®ï¼š</view>
      <view class="suggestions-list">
        <view 
          wx:for="{{getCurrentErrorConfig().suggestions}}" 
          wx:key="index" 
          class="suggestion-item"
        >
          â€¢ {{item}}
        </view>
      </view>
    </view>
    
    <!-- è¯¦ç»†ä¿¡æ¯ï¼ˆå¯å±•å¼€ï¼‰ -->
    <view wx:if="{{showDetails && details}}" class="details-section">
      <view class="details-toggle" bindtap="toggleDetails">
        <text class="details-text">è¯¦ç»†ä¿¡æ¯</text>
        <text class="toggle-icon {{showDetailInfo ? 'expanded' : ''}}">â–¼</text>
      </view>
      
      <view wx:if="{{showDetailInfo}}" class="details-content">
        <text class="details-info">{{details}}</text>
        <button class="copy-button" bindtap="onCopyError">
          ğŸ“‹ å¤åˆ¶é”™è¯¯ä¿¡æ¯
        </button>
      </view>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="error-actions">
      <!-- ä¸»è¦æŒ‰é’® -->
      <view class="primary-actions">
        <button 
          wx:if="{{showRetry}}" 
          class="action-button primary" 
          bindtap="onRetry"
        >
          ğŸ”„ é‡è¯•
        </button>
      </view>
      
      <!-- æ¬¡è¦æŒ‰é’® -->
      <view class="secondary-actions">
        <button 
          wx:if="{{showFeedback}}" 
          class="action-button secondary" 
          bindtap="onFeedback"
        >
          ğŸ“ åé¦ˆé—®é¢˜
        </button>
        
        <button 
          class="action-button secondary" 
          bindtap="onContactSupport"
        >
          ğŸ’¬ è”ç³»å®¢æœ
        </button>
      </view>
    </view>
    
    <!-- å…³é—­æŒ‰é’® -->
    <view class="close-button" bindtap="onClose">
      âœ•
    </view>
    
  </view>
</view>