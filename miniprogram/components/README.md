# 前端组件核心约束文档

## 🎯 核心UI组件约束

### task-card 任务卡片组件

#### 四要素显示约束
**必须包含的四个信息角落**:
1. **左上角标题**: 课程/题目名称（如"2025国考执法卷第四题"）
2. **右上角评价**: 根据状态显示
   - 未提交：`待提交`
   - 已提交待批改：`待批改`  
   - 已批改：`待复盘`/`优秀`/`极佳`
3. **左下角状态标签**: 用颜色区分
   - `正在进行中`：未来直播课，默认色
   - `课后加餐`：加餐任务，突出色
   - `已结束`：过期任务，灰色
   - `已完成`：完成任务，绿色
4. **右下角日期**: 直播/课程开始日期

#### 权限控制显示
- **付费学员**: 显示完整四要素，所有卡片可点击
- **试用学员**: 显示基础信息，点击弹出权限提示
- **课后加餐置顶**: extra类型任务始终在列表顶部显示

### checkin-chart 打卡图组件

#### GitHub风格14天布局
**2行×7天方格布局**:
- **第1行**: 第2周（7天前-14天前）
- **第2行**: 第1周（今天-6天前）
- **颜色规则**: 有打卡显示绿色，无打卡显示浅灰色
- **触摸反馈**: 点击方格显示具体日期和状态

#### 数据结构约束
```javascript
// 输入数据格式
checkinData: [
  {date: 'YYYY-MM-DD', hasCheckin: true/false}, 
  // 14个元素，按日期倒序
]
```

### mixed-input 混合输入组件

#### 评语输入约束
**三种输入方式**:
1. **文字输入**: 标准多行文本框，支持模板快速插入
2. **语音输入**: 长按录音，自动调用通义千问API转文字
3. **快捷操作**: 表情符号、标点符号快速插入

#### 语音转文字约束
- **录音时长**: 最长60秒
- **转写准确率**: ≥85%
- **失败处理**: 提供重录选项和手动输入降级
- **混合编辑**: 支持语音转文字结果的再次编辑

### grading-navigator 批改导航组件

#### 智能导航约束
**进度可视化**:
- **进度条**: 动态显示"第X份/共Y份"
- **学生卡片**: 头像、昵称、提交时间、第几次提交
- **手势支持**: 左右滑动切换学生作业
- **快捷操作**: 标记学生、添加备注、查看历史

#### 导航逻辑约束
- **上一篇**: 可回退到上一学生作业
- **保存评价**: 选择评价档位后激活，评语可为空
- **下一篇**: 保存成功后激活，批改完成自动跳转下一份

### upload-progress 上传进度组件

#### 多图片上传约束
- **并发上传**: 支持最多6张图片同时上传
- **进度显示**: 每张图片独立进度条，显示百分比
- **状态标识**: 上传中(蓝色)/成功(绿色)/失败(红色)
- **失败重试**: 自动重试3次，手动重试选项

### grading-analytics 批改统计组件

#### 统计面板约束
**数据展示区块**:
1. **统计总览**: 总提交数、已批改数、完成率、平均用时
2. **成绩分布**: 三档评价的柱状图/饼图可视化  
3. **效率分析**: 今日批改数、本周趋势、批改活跃时段
4. **学生洞察**: 优秀学生数、需关注学生、整体趋势

#### 图表约束
- **实时更新**: 数据变化时图表平滑更新
- **交互支持**: 点击图表查看详细数据
- **导出功能**: 支持PDF/Excel格式导出

## 🎨 设计规范约束

### 色彩主题
- **主色调**: 紫色渐变 (#667eea → #764ba2)
- **状态色彩**:
  - 成功：绿色 (#67C23A)
  - 警告：橙色 (#E6A23C)  
  - 危险：红色 (#F56C6C)
  - 信息：蓝色 (#409EFF)

### 交互规范
- **卡片点击**: 有轻微阴影和缩放反馈
- **按钮状态**: 禁用状态明确区分，激活状态突出显示
- **加载状态**: skeleton骨架屏，避免空白页面
- **错误提示**: toast形式，3秒自动消失

### 响应式约束
- **最小点击区域**: ≥44px，便于手指点击
- **文字大小**: 最小12px，确保可读性
- **间距标准**: 8px基础间距，16px、24px倍数递增

## 🔧 技术实现约束

### 组件通信
```javascript
// 标准事件触发格式
this.triggerEvent('eventName', {
  detail: {
    // 事件数据
  }
}, {
  bubbles: true,
  composed: true
});
```

### 数据绑定
- **单向绑定**: 父组件向子组件传递数据
- **双向绑定**: 表单组件支持model:value双向绑定
- **观察者模式**: properties的observer监听数据变化

### 性能优化
- **懒加载**: 大列表使用虚拟滚动或分页加载
- **图片优化**: 自动压缩，lazyload延迟加载
- **缓存策略**: 静态数据本地缓存，减少网络请求

## ⚠️ 重要提醒

### 权限控制
1. 所有组件必须根据用户权限显示不同内容
2. 试用用户交互受限，需要明确的权限提示
3. 教师用户拥有额外的管理功能入口

### 微信小程序限制
1. **图片上传**: 单次最多9张，建议压缩后上传
2. **本地存储**: 最大10MB，合理使用缓存
3. **网络请求**: 并发限制10个，需要队列管理
4. **组件层级**: 避免过深嵌套，影响性能

### 用户体验
1. **加载反馈**: 任何耗时操作都要有loading提示
2. **操作反馈**: 成功/失败操作需要明确的用户反馈
3. **容错处理**: 网络异常、权限不足等情况的友好提示
4. **无障碍支持**: 重要按钮添加aria-label属性