# 公考督学助手用户故事地图 (User Story Map)

**版本**: V1.0  
**更新时间**: 2025-09-06  
**目标读者**: 产品经理  
**基准文档**: PRD_main.md + components_guide.md (已修订)

---

## 🎯 产品愿景与用户价值

### 核心用户旅程
```
学生视角: 注册授权 → 权限验证 → 查看任务 → 提交作业 → 查看评价 → 持续学习
教师视角: 获得权限 → 创建任务 → 批改作业 → 跟踪进度 → 学生管理
```

### 关键用户角色
- **付费学员**: 已缴费的学员，能完整使用所有学习功能
- **试用学员**: 未付费的用户，只能浏览课程目录
- **教师用户**: 负责教学管理，发布任务和批改作业

---

## 🗺️ 用户故事地图结构

## 主干1: 用户身份与权限管理

### 用户故事1.1: 新用户快速进入
> **作为** 一个公考培训的新学员  
> **我想要** 通过微信快速授权登录小程序  
> **这样** 我就能立即开始使用督学功能

**关键场景**:
- 首次打开小程序看到清晰的授权说明
- 一键微信登录，获取头像和昵称
- 系统自动验证用户权限状态
- 根据权限跳转到相应页面

**验收细节**:
- 授权页面说明用途和隐私政策
- 授权失败有明确错误提示和重试机制


### 用户故事1.2: 课程权限验证 
> **作为** 系统  
> **我需要** 在用户授权后立即验证其课程权限  
> **这样** 我能确保只有付费学员能访问完整功能

**关键场景**:
- 微信登录成功后，系统使用openid查询用户权限状态
- 已付费学员: 自动跳转到完整功能的任务首页
- 未付费用户: 跳转到任务首页，但无法点击具体任务

**验收细节**:
- 权限查询响应时间< 500ms
- 付费状态变更后需立即生效


### 用户故事1.3: 试用用户体验
> **作为** 还未付费的潜在学员  
> **我想要** 了解课程内容和学习形式  
> **这样** 我能决定是否购买课程

**关键场景**:
- 登录后看到完整的课程目录列表
- 点击任务时显示"无权限"提示

**验收细节**:
- 课程目录信息完整展示
- 购买完成后立即获得完整权限

### 用户故事1.4: 个人信息维护
> **作为** 已注册的学员  
> **我想要** 管理我的个人信息  
> **这样** 老师能准确识别我，我也能追踪学习进度

**关键场景**:
- 查看微信头像和当前昵称
- 修改小程序内使用的昵称（每月仅有1次机会）
- 查看学习统计(累计提交次数等)
- 查看当前权限状态和有效期
- 必要时退出登录重新授权

**验收细节**:
- 昵称修改后在所有地方立即生效
- 统计数据准确反映学习活动
- 权限状态显示清晰准确
- 退出登录后清除本地缓存

### 用户故事1.5: 教师权限获取
> **作为** 需要管理学员的老师  
> **我想要** 获得教研管理权限  
> **这样** 我就能发布任务和批改作业

**关键场景**:
- 通过管理员分配获得教师权限
- 登录后底部导航栏出现"教研"入口
- 能访问所有教研管理功能
- 能查看所有学员(付费和试用)的状态
- 权限变更后立即生效

**验收细节**:
- 权限分配机制清晰可控
- 无权限用户无法看到“教研”入口
- 教师能同时使用学生和教师功能
- 能区分管理付费和试用学员

---

## 主干2: 学习任务体系

### 用户故事2.1: 浏览学习任务(付费学员)
> **作为** 付费学员  
> **我想要** 清晰地看到所有学习任务和我的完成状态  
> **这样** 我能合理安排学习计划

**关键场景**:
- 首页看到按时间排序的任务卡片
- 课后加餐任务自动置顶显示
- 每个任务显示四要素: 标题/评价状态/任务类型/课程日期
- 能区分不同状态的任务: 正在进行中/课后加餐/已结束/已完成
- 所有任务都可以点击进入详情

**验收细节**:
- 任务卡片状态显示逻辑准确
- 支持筛选功能: 全部/进行中/已结束
- 下拉刷新获取最新任务状态
- 空状态时显示友好的引导信息

### 用户故事2.2: 课程目录浏览(试用用户) 
> **作为** 试用用户  
> **我想要** 浏览课程目录了解学习内容  
> **这样** 我能评估课程价值

**关键场景**:
- 首页显示所有课程任务的基本信息
- 任务卡片显示: 标题/课程类型/日期，但不显示完成状态
- 卡片呈现"预览模式"的视觉样式
- 点击任务弹出权限提示

**验收细节**:
- 试用模式视觉区别明显但不影响浏览体验
- 权限提示友好且具有引导性
- 不显示其他学员的学习进度信息

**真实使用细节推敲**:
- 试用用户可能频繁点击任务测试权限，需要避免过多弹窗干扰

### 用户故事2.3: 查看任务要求(付费学员)
> **作为** 付费学员  
> **我想要** 详细了解每个任务的具体要求  
> **这样** 我能准确完成作业

**关键场景**:
- 点击任务卡片进入详情页
- 清楚看到任务标题和课程信息
- 完整阅读题目详情和要求
- 根据提交状态看到不同的操作界面

**验收细节**:
- 题目内容支持长文本和换行显示
- 返回按钮能回到列表的原来位置
- 页面加载失败时有重试机制
- 权限验证在页面加载时进行

**真实使用细节推敲**:
- 付费学员访问任务详情时需要再次验证权限状态
- 权限过期的用户需要友好的报错提示
- 长期未登录的用户可能需要重新验证权限

---

## 主干3: 作业提交流程

### 用户故事3.1: 首次提交作业
> **作为** 付费学员  
> **我想要** 方便地上传我的作业图片  
> **这样** 我能及时完成学习任务

**关键场景**:
- 在任务详情页看到"上传图片提交作业"按钮
- 选择相册图片或拍照，最多6张
- 看到图片上传进度
- 提交成功后状态变为"待批改"

**验收细节**:
- 提交前再次验证用户权限
- 图片压缩后仍保证清晰度
- 上传失败能重试和删除重选
- 提交成功有明确的反馈提示
- 大图片上传显示进度条


### 用户故事3.2: 重新提交改进
> **作为** 付费学员  
> **我想要** 在老师批改前改进我的作业  
> **这样** 我能提交更满意的答案

**关键场景**:
- 在待批改状态下看到已提交的作业
- 看到剩余提交次数提示
- 点击"重新提交"重新上传图片
- 新提交覆盖之前的内容

**验收细节**:
- 重新提交前验证权限仍然有效
- 清楚显示"第X次提交，剩余Y次机会"
- 3次用完后不再显示重新提交选项
- 每次提交都记录时间戳

### 用户故事3.3: 查看批改结果
> **作为** 付费学员  
> **我想要** 清楚地看到老师的批改评价  
> **这样** 我能了解自己的水平和改进方向

**关键场景**:
- 收到批改完成的通知
- 在任务详情页看到批改结果
- 查看评价档位: 待复盘/优秀/极佳
- 阅读老师的详细评语
- 若评价档位为“待复盘”，则刷新上传次数，允许学生再次上传批改。

**验收细节**:
- 查看结果前验证权限状态
- 评价档位用不同颜色和样式突出显示
- 评语支持长文本和换行
- 能放大查看批改后的作业图片

---

## 主干4: 教学管理体系

### 用户故事4.1: 创建学习任务
> **作为** 老师  
> **我想要** 快速创建新的学习任务  
> **这样** 所有学员(包括试用用户)都能看到课程安排

**关键场景**:
- 从教研中心进入任务管理
- 点击"+"按钮创建新任务
- 填写课程名称、开始时间、题目详情
- 发布后任务对所有用户可见(但功能受权限限制)

**验收细节**:
- 表单验证防止空内容提交
- 时间选择器易于使用
- 题目详情支持长文本输入
- 创建成功后任务立即同步到所有用户端

### 用户故事4.2: 监控任务进度
> **作为** 老师  
> **我想要** 实时了解付费学员的作业完成情况  
> **这样** 我能及时调整教学计划

**关键场景**:
- 在任务管理页查看所有任务状态
- 看到每个任务的提交统计(仅统计付费学员)
- 了解哪些付费学员还未提交
- 查看试用用户的浏览数据
- 必要时调整任务状态

**验收细节**:
- 统计数据区分付费和试用用户
- 统计数据实时更新
- 能区分"已提交"和"已批改"数量
- 任务状态切换操作简单明确

---

## 主干5: 作业批改体系

### 用户故事5.1: 高效批改作业
> **作为** 老师  
> **我想要** 在专注的环境中批改付费学员作业  
> **这样** 我能给出准确的评价和指导

**关键场景**:
- 从批改工作台选择需要批改的任务
- 批改列表仅显示付费学员的提交
- 进入沉浸式界面逐一批改
- 查看学员作业图片，支持放大缩放
- 选择评价档位并填写评语

**验收细节**:
- 批改界面明确显示学员权限状态
- 图片显示清晰，支持手势操作
- 评价选择器易于操作
- 评语输入框大小合适
- 保存操作有明确反馈

### 用户故事5.2: 批改流程管理
> **作为** 老师  
> **我想要** 按顺序高效地完成批改工作  
> **这样** 我能确保每个付费学员都得到及时反馈

**关键场景**:
- 看到当前批改进度(第X份/共Y份付费学员作业)
- 批改完成后选择继续或返回工作台
- 所有批改完成后看到完成提示

**验收细节**:
- 导航按钮状态逻辑正确
- 进度显示准确(仅计算付费学员)
- 批改状态实时同步
- 完成后有成就感的反馈

### 用户故事5.3: 混合输入评语 (V1.0新增)
> **作为** 老师  
> **我想要** 使用多种方式快速输入评语  
> **这样** 我能提高批改效率并给出更个性化的反馈

**关键场景**:
- 传统文字输入，支持常用评语模板快速插入
- 语音录制评语，系统自动转换为文字
- 使用快捷操作添加表情和标点符号
- 实时查看评语字数统计

**验收细节**:
- 语音转文字准确率达到85%以上
- 支持语音录制时长60秒以内
- 转写失败时有明确提示和重试选项
- 评语输入框支持文字和语音的混合编辑

### 用户故事5.4: 智能导航系统 (V1.0新增)
> **作为** 老师  
> **我想要** 在批改过程中快速导航和获得操作反馈  
> **这样** 我能更专注地完成批改工作

**关键场景**:
- 查看直观的进度可视化指示器
- 快速浏览学生信息卡片(头像、昵称、提交信息)
- 使用快捷操作标记学生、添加备注
- 手势滑动快速切换学生作业

**验收细节**:
- 进度条动态更新，显示准确的完成百分比
- 学生信息卡片信息完整准确
- 左右滑动手势响应灵敏，切换流畅
- 快捷操作按钮功能正确，反馈及时

---

## 主干6: 批改数据统计与历史管理 (V1.0新增)

### 用户故事6.1: 批改数据统计面板
> **作为** 老师  
> **我想要** 查看详细的批改数据统计和分析  
> **这样** 我能了解教学效果和优化批改策略

**关键场景**:
- 查看批改总览(总提交数、已批改数、完成率)
- 分析效率数据(平均批改用时、今日批改数、批改趋势)
- 查看成绩分布图表(各评价档位比例)
- 查看学生表现趋势和重点关注学生

**验收细节**:
- 统计数据实时更新，准确反映当前状态
- 图表显示清晰，支持不同视图模式切换
- 数据计算逻辑正确，排除试用用户数据
- 统计面板加载速度快，用户体验流畅

### 用户故事6.2: 批改历史管理
> **作为** 老师  
> **我想要** 查看和管理批改历史记录  
> **这样** 我能追踪批改轨迹和回顾历史批改详情

**关键场景**:
- 时间线方式查看所有批改历史记录
- 按学生姓名、评价档位、时间范围筛选记录
- 点击历史记录查看完整批改详情
- 导出批改历史报告

**验收细节**:
- 历史记录按时间倒序展示，支持无限滚动加载
- 搜索和筛选功能响应快速，结果准确
- 详情页面完整展示作业图片、评语、评分
- 导出功能支持多种格式，数据完整

### 用户故事6.3: 数据洞察与报告
> **作为** 老师  
> **我想要** 获得基于数据的洞察分析和改进建议  
> **这样** 我能持续优化教学质量和批改效率

**关键场景**:
- 查看异常情况提醒(批改时间过长、学生表现异常等)
- 对比历史数据，查看教学效果趋势变化
- 生成详细的批改统计报告
- 导出学生成绩单和学习档案

**验收细节**:
- 异常检测准确及时，提醒信息有助于改进
- 趋势对比数据准确，图表展示直观
- 报告生成速度合理，内容完整专业
- 导出数据格式标准，便于后续处理

---

## 主干7: 系统体验优化 (V1.0新增)

### 用户故事7.1: 统一加载状态体验
> **作为** 用户  
> **我想要** 在页面加载时看到友好的加载状态提示  
> **这样** 我能清楚知道系统正在响应我的操作

**关键场景**:
- 页面首次加载时显示骨架屏占位
- 列表刷新时显示加载指示器
- 图片上传时显示实时进度条
- 长时间操作提供进度反馈

**验收细节**:
- 骨架屏样式与实际内容布局一致
- 加载动画流畅自然，不影响操作体验
- 上传进度准确显示，支持取消操作
- 超时情况有明确提示和重试选项

### 用户故事7.2: 全局错误处理
> **作为** 用户  
> **我想要** 在遇到错误时获得清晰的说明和解决方案  
> **这样** 我能快速恢复正常使用

**关键场景**:
- 网络连接失败时显示网络错误提示
- 权限不足时提供明确的权限说明
- 操作失败时给出具体的错误原因和解决建议
- 系统异常时提供联系支持的途径

**验收细节**:
- 错误信息使用用户友好的语言表达
- 每种错误都有相应的图标和颜色区分
- 提供明确的重试或解决步骤
- 支持错误日志收集以便问题排查

### 用户故事7.3: AI语音转文字功能
> **作为** 老师  
> **我想要** 使用语音快速录入评语  
> **这样** 我能大幅提升批改效率和评语个性化程度

**关键场景**:
- 点击录音按钮开始语音录制
- 实时显示录音状态和时长
- 录制完成后自动转换为文字
- 支持编辑转换结果并保存

**验收细节**:
- 语音录制界面直观易用，状态清晰
- 转写准确率达到预期标准
- 转写失败时有重录选项
- 支持语音与文字的混合编辑

---

## 主干8: 学员管理与分析

### 用户故事8.1: 了解学员情况
> **作为** 老师  
> **我想要** 全面了解所有学员的基本信息和权限状态  
> **这样** 我能更好地进行个性化指导

**关键场景**:
- 查看学员总列表和基本信息
- 区分付费学员和试用用户
- 看到每个付费学员的累计提交次数
- 搜索特定学员
- 进入学员的详细档案

**验收细节**:
- 学员列表明确标识权限状态
- 统计数据仅计算付费学员活动
- 搜索功能快速有效
- 权限状态实时更新

### 用户故事6.2: 追踪学习轨迹
> **作为** 老师  
> **我想要** 查看单个付费学员的学习历史  
> **这样** 我能评估学员的进步情况

**关键场景**:
- 进入付费学员的个人档案页
- 看到所有历史作业记录
- 了解评价档位分布和趋势
- 查看具体的作业和批改详情
- 试用用户档案仅显示浏览记录

**验收细节**:
- 档案页面明确显示学员权限类型
- 历史记录按时间排序
- 能快速看出学员的进步趋势
- 点击任意记录能查看详情

---

## 🔍 产品使用疑点与风险分析

### 业务逻辑疑点

#### 4. 混合用户群体管理
**疑点**: 
付费和试用用户的数据隔离
老师统计数据应该包含试用用户，
试用用户不能看到其他学员的进度。

---

*文档维护说明：本用户故事地图应随产品迭代持续更新，权限相关的疑点分析需要产品团队与技术团队协同决策*